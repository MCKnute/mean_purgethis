<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Questions and Answers - MEAN hackathon app</title>
    <meta name="description" content="A MEAN app written in 4 hours!">
    <meta name="author" content="Mollie Knute">
    <link rel="stylesheet" type="text/css" href="/styles/styles.css">
    <style>
    </style>

    <script src="/js/angular.min.js"></script>
    <script src="/js/angular-route.min.js"></script>

    <script type='text/javascript'>
    	var qaAppModule = angular.module('qaApp', ['ngRoute']);

        qaAppModule.config(function ($routeProvider) {
          $routeProvider
            .when('/',{
                templateUrl: 'partials/questions_main.html'
            })
            .otherwise({
              redirectTo: '/'
            });
        });

///////// FACTORY  ///
     qaApp.factory('QuestionFactory', function($http) {
      var factory = {};
      var questions = [];
      factory.getQuestions = function(callback) {
        $http.get('/questions').success(function(output){
          questions = output;
          callback(questions);
        });
      };

      factory.addQuestion = function(info, callback) {
        $http.post('/questions', info).success(function(output){
        });
      };

      return factory;
    });

      qaApp.factory('UserFactory', function($http) {
      var factory = {};
      var users = [];
      factory.getUsers = function(callback) {
        $http.get('/users').success(function(output){
          users = output;
          callback(users);
        });
      };

      factory.addUser = function(info, callback) {
        $http.post('/users', info).success(function(output){
        });
      };

      return factory;
    });

////////// Controllers ////////
        qaAppModule.controller('QuestionsController', function ($scope, QuestionFactory){

            
            $scope.questions = [];

            $scope.addQuestion = function (){
    		    $scope.questions.push($scope.newQuestion); 
    		    $scope.newQuestion = {};
    		};

            QuestionFactory.getQuestions(function (data){
                $scope.questions = data;
            });
            
        });

        qaAppModule.controller('UsersController', function ($scope, UserFactory){
            $scope.users = [];

            $scope.addUser = function (){
    		    $scope.users.push($scope.newUser); 
    		    $scope.newUser = {};
    		};


            UserFactory.getUsers(function (data){
                $scope.users = data;
            });
            
        });